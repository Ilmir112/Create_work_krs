name: Build PyInstaller
on:  ['push', 'pull_request']
jobs:
  build:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.8' # Замените на нужную версию Pyth on

      - name: Install PyInstaller
        run: pip install pyinstaller
#      - name: Install requirements
#        run: pip install -r requirements.txt
      - name: Install dependencies
        run: pip install -r requirements.txt
#          - name: Build executable
#              run: pyinstaller --onefile --hidden-import data_base.data_base_well.database_well main.py
      - name: Build executable
        run:
          pyinstaller --noconfirm --onedir --windowed 
          --add-data work_py:work_py 
          --add-data users:users 
          --add-data property_excel:property_excel 
          --add-data imageFiles:imageFiles 
          --add-data gnkt_data:gnkt_data 
          --add-data data_base:data_base 
          --add-data work_json.py:work_json.py 
          --add-data well_data.py:well_data.py 
          --add-data selectPlast.py:selectPlast 
          --add-data proverka.py:proverka.py 
          --add-data plan23.py:. 
          --add-data plan.py:. 
          --add-data perforation_correct_gnkt_frez.py:erforation_correct_gnkt_frez.py 
          --add-data perforation_correct.py:perforation_correct.py 
          --add-data open_pz.py:open_pz.py 
          --add-data krs.py:krs.py 
          --add-data H2S.py:H2S.py 
          --add-data gnkt_opz.py:gnkt_opz.py 
          --add-data gnkt_after_grp.py:gnkt_after_grp. 
          --add-data find.py:find.py 
          --add-data data_correct_position_people.py:data_correct_position_people.py 
          --add-data data_correct.py:data_correct.py 
          --add-data convert_xls.py:convert_xls.py 
          --add-data cdng.py:cdng.py 
          --add-data category_correct.py:category_correct.py 
          --add-data build_script.py:build_script.py 
          --add-data block_name.py:block_name.py 
          --add-data application_pvr.py:application_pvr.py 
          --add-data application_gis.py:application_gis.py 
          main.py


      - name: Upload artifact
        uses: actions/upload-artifact@v3
        with:
          name: main
          path: dist/main.exe